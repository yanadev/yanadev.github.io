"use strict";(self.webpackChunkyana_github_io=self.webpackChunkyana_github_io||[]).push([[5573],{80088:(n,i,e)=>{e.r(i),e.d(i,{assets:()=>h,contentTitle:()=>r,default:()=>u,frontMatter:()=>s,metadata:()=>c,toc:()=>a});var t=e(74848),o=e(28453);const s={slug:"shopify-github-action",title:"shopify\u9879\u76ee\u8bbe\u7f6e\u81ea\u52a8\u5316\u90e8\u7f72\u5230 main \u5206\u652f\u5b9e\u73b0\u8054\u52a8",authors:"yana",tags:["shopify","github/action"]},r=void 0,c={permalink:"/shopify-github-action",source:"@site/blog/2024-05-04-shopify\u9879\u76ee\u4e0egithub-action/index .md",title:"shopify\u9879\u76ee\u8bbe\u7f6e\u81ea\u52a8\u5316\u90e8\u7f72\u5230 main \u5206\u652f\u5b9e\u73b0\u8054\u52a8",description:"Question",date:"2024-05-04T00:00:00.000Z",tags:[{inline:!0,label:"shopify",permalink:"/tags/shopify"},{inline:!0,label:"github/action",permalink:"/tags/github-action"}],readingTime:3.035,hasTruncateMarker:!1,authors:[{name:"Yana Ching",title:"Front End Engineer",url:"https://yamadev.github.io/",imageURL:"https://github.com/yanadev.png",key:"yana",page:null}],frontMatter:{slug:"shopify-github-action",title:"shopify\u9879\u76ee\u8bbe\u7f6e\u81ea\u52a8\u5316\u90e8\u7f72\u5230 main \u5206\u652f\u5b9e\u73b0\u8054\u52a8",authors:"yana",tags:["shopify","github/action"]},unlisted:!1,prevItem:{title:"shopify \u542f\u52a8\u5931\u8d25",permalink:"/shopify-dev-error"},nextItem:{title:"liquid \u8bed\u6cd5",permalink:"/liquid-basic"}},h={authorsImageUrls:[void 0]},a=[{value:"Question",id:"question",level:2},{value:"\u89e3\u51b3\u65b9\u6848",id:"\u89e3\u51b3\u65b9\u6848",level:2},{value:"\u5177\u4f53\u64cd\u4f5c",id:"\u5177\u4f53\u64cd\u4f5c",level:2},{value:"\u521b\u5efa Github Actions \u5de5\u4f5c\u6d41",id:"\u521b\u5efa-github-actions-\u5de5\u4f5c\u6d41",level:3}];function l(n){const i={code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",...(0,o.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.h2,{id:"question",children:"Question"}),"\n",(0,t.jsxs)(i.ol,{children:["\n",(0,t.jsxs)(i.li,{children:["\u539f\u751f\u7684 shopify \u4e3b\u9898\u5f00\u53d1\u4e2d\u5f15\u5165\u4e86 ",(0,t.jsx)(i.code,{children:"tailwind"}),"\u3001",(0,t.jsx)(i.code,{children:"webpack"})," \u7b49\u7f16\u8bd1\u5de5\u5177\uff0c\u672c\u5730\u5f00\u53d1\u7684\u65f6\u5019\u63a7\u5236\u53f0\u4e00\u76f4\u544a\u8b66"]}),"\n",(0,t.jsxs)(i.li,{children:["\u5728\u6839\u76ee\u5f55\u4e2d\u5f15\u5165\u9664\u4e86\u4e3b\u9898\u6587\u4ef6\u4ee5\u5916\u7684\u5176\u4ed6\u6587\u4ef6\u65f6\uff0c\u65e0\u6cd5\u4f7f\u7528 ",(0,t.jsx)(i.code,{children:"shopify theme push"})," \u7b49 shopify/cli \u5de5\u5177\u6765\u9884\u89c8\u5728\u7ebf\u5f00\u53d1\u4e3b\u9898"]}),"\n",(0,t.jsxs)(i.li,{children:["\u6709\u65f6\u5019\u5728\u7f51\u9875\u7f16\u8f91\u5668\u4e2d\u4fee\u6539\u4e3b\u9898\u4e4b\u540e,\u76f4\u63a5\u7528 ",(0,t.jsx)(i.code,{children:"shopify theme pull"})," \u6765\u62c9\u53d6\u4e3b\u9898,\u4f1a\u76f4\u63a5\u8986\u76d6/\u79fb\u9664\u672c\u5730\u5176\u4ed6\u91cd\u8981\u6587\u4ef6"]}),"\n",(0,t.jsx)(i.li,{children:"\u5f00\u53d1\u548c\u7528\u6237\u73af\u5883\u6709\u51b2\u7a81\uff0c\u5f00\u53d1\u671f\u95f4\uff0cshopify \u5e97\u94fa\u6709\u6570\u636e\u589e\u51cf\uff0c\u4e0e shopify \u5e97\u94fa\u76f4\u8fde\u7684\u5206\u652f\u4f1a\u63a5\u6536\u6765\u81ea\u5e97\u94fa\u7684\u4e00\u4e9b\u66f4\u65b0\uff0c\u8fd9\u90e8\u5206\u66f4\u65b0\r\n\u9700\u8981\u53ef\u4ee5\u66f4\u65b0\u5230\u5f00\u53d1\u5206\u652f"}),"\n"]}),"\n",(0,t.jsx)(i.h2,{id:"\u89e3\u51b3\u65b9\u6848",children:"\u89e3\u51b3\u65b9\u6848"}),"\n",(0,t.jsxs)(i.ol,{children:["\n",(0,t.jsx)(i.li,{children:"\u7ef4\u62a4\u4e00\u4e2a\u5355\u72ec\u7684\u76ee\u5f55\u6765\u5b58\u653e\u4e3b\u9898\u6587\u4ef6\uff0c\u652f\u6301\u4e0a\u4f20\u3001\u4e0b\u62c9\u4e3b\u9898\u6587\u4ef6"}),"\n",(0,t.jsx)(i.li,{children:"\u521b\u5efa action \u81ea\u52a8\u5316\u90e8\u7f72\u6765\u6e05\u7406\u51fa\u4e00\u4e2a\u5e72\u51c0\u7684\u5206\u652f\u540c\u6b65 shopify \u5e97\u94fa\u5f53\u524d\u5728\u7ebf\u4e3b\u9898"}),"\n",(0,t.jsx)(i.li,{children:"\u540c\u65f6\u5728 dev \u9879\u76ee\u7684 shopify \u6587\u4ef6\u5939\u4e2d\u7ef4\u62a4\u53e6\u4e00\u4e2a github \u5730\u5740\u6765\u66f4\u65b0\u6700\u65b0\u7684 main \u5206\u652f"}),"\n"]}),"\n",(0,t.jsx)(i.h2,{id:"\u5177\u4f53\u64cd\u4f5c",children:"\u5177\u4f53\u64cd\u4f5c"}),"\n",(0,t.jsx)(i.h3,{id:"\u521b\u5efa-github-actions-\u5de5\u4f5c\u6d41",children:"\u521b\u5efa Github Actions \u5de5\u4f5c\u6d41"}),"\n",(0,t.jsxs)(i.p,{children:["github \u4ed3\u5e93\u4e2d\uff0c\u6839\u76ee\u5f55\u4e2d\u521b\u5efa ",(0,t.jsx)(i.code,{children:".github/workflows/sync-shopify-to-main.yml"})," \u76ee\u5f55"]}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-yaml",children:"name: Sync Shopify Folder to Main\r\n\r\non:\r\n  push:\r\n    branches:\r\n      - dev\r\n\r\njobs:\r\n  sync-shopify:\r\n    runs-on: ubuntu-latest\r\n\r\n    steps:\r\n      - name: Checkout dev branch\r\n        uses: actions/checkout@v2\r\n        with:\r\n          ref: dev\r\n\r\n      - name: Copy Shopify folder\r\n        run: |\r\n          mkdir shopify_copy\r\n          cp -R ./shopify/* shopify_copy/\r\n\r\n      - name: Checkout main branch\r\n        uses: actions/checkout@v2\r\n        with:\r\n          ref: main\r\n          persist-credentials: false\r\n\r\n      - name: Copy files to main\r\n        run: |\r\n          cp -R shopify_copy/* .\r\n\r\n      - name: Configure git\r\n        run: |\r\n          git config --global user.name 'github-actions[bot]'\r\n          git config --global user.email 'github-actions[bot]@users.noreply.github.com'\r\n\r\n      - name: Commit changes\r\n        run: |\r\n          git add .\r\n          git commit -m \"Sync Shopify folder from dev branch\"\r\n          git push origin main\r\n        env:\r\n          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n"})}),"\n",(0,t.jsxs)(i.ol,{children:["\n",(0,t.jsx)(i.li,{children:"\u89e6\u53d1\u6761\u4ef6\uff1a\u5de5\u4f5c\u6d41\u5728 dev \u5206\u652f\u6709\u63a8\u9001\u4e8b\u4ef6\u65f6\u89e6\u53d1"}),"\n",(0,t.jsx)(i.li,{children:"Checkout dev \u5206\u652f\uff1a\u4f7f\u7528 actions/checkout@v2 \u64cd\u4f5c\u4ece dev \u5206\u652f\u68c0\u51fa\u4ee3\u7801"}),"\n",(0,t.jsx)(i.li,{children:"\u590d\u5236 Shopify \u6587\u4ef6\u5939\uff1a\u5c06./shopify \u6587\u4ef6\u5939\u4e2d\u7684\u6240\u6709\u5185\u5bb9\u590d\u5236\u5230\u4e00\u4e2a\u4e34\u65f6\u76ee\u5f55 shopify_copy \u4e2d"}),"\n",(0,t.jsx)(i.li,{children:"Checkout main \u5206\u652f\uff1a\u518d\u6b21\u4f7f\u7528 actions/checkout@v2 \u64cd\u4f5c\uff0c\u8fd9\u6b21\u68c0\u51fa main \u5206\u652f\uff0c\u5e76\u53d6\u6d88 persist-credentials \u4ee5\u9632\u6b62\u51ed\u8bc1\u95ee\u9898"}),"\n",(0,t.jsx)(i.li,{children:"\u590d\u5236\u6587\u4ef6\u5230 main\uff1a\u5c06 shopify_copy \u4e2d\u7684\u5185\u5bb9\u590d\u5236\u5230\u5f53\u524d\u5de5\u4f5c\u76ee\u5f55\uff08\u5373 main \u5206\u652f\u7684\u6839\u76ee\u5f55\uff09"}),"\n",(0,t.jsx)(i.li,{children:"\u914d\u7f6e Git\uff1a\u8bbe\u7f6e Git \u7528\u6237\u4fe1\u606f\uff0c\u4ee5\u4fbf GitHub Actions \u673a\u5668\u4eba\u80fd\u591f\u63d0\u4ea4\u66f4\u6539"}),"\n",(0,t.jsx)(i.li,{children:"\u63d0\u4ea4\u66f4\u6539\uff1a\u6dfb\u52a0\u3001\u63d0\u4ea4\u5e76\u63a8\u9001\u66f4\u6539\u5230 main \u5206\u652f\u3002\u8fd9\u91cc\u4f7f\u7528\u4e86 GitHub \u63d0\u4f9b\u7684 GITHUB_TOKEN\uff0c\u8be5\u4ee4\u724c\u7531 GitHub Actions \u81ea\u52a8\u63d0\u4f9b\uff0c\r\n\u5e76\u5728\u8fd0\u884c\u5de5\u4f5c\u6d41\u65f6\u6ce8\u5165\u5230\u73af\u5883\u4e2d"}),"\n"]})]})}function u(n={}){const{wrapper:i}={...(0,o.R)(),...n.components};return i?(0,t.jsx)(i,{...n,children:(0,t.jsx)(l,{...n})}):l(n)}},28453:(n,i,e)=>{e.d(i,{R:()=>r,x:()=>c});var t=e(96540);const o={},s=t.createContext(o);function r(n){const i=t.useContext(s);return t.useMemo((function(){return"function"==typeof n?n(i):{...i,...n}}),[i,n])}function c(n){let i;return i=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:r(n.components),t.createElement(s.Provider,{value:i},n.children)}}}]);