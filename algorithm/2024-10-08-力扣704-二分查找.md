---
slug: binary-search
title: åŠ›æ‰£704-äºŒåˆ†æŸ¥æ‰¾
authors: yana
tags: [algorithm, leetcode, BinarySearch, BS]
---

## äºŒåˆ†æ³•

1. é€‚ç”¨äº**æœ‰åº**æ•°æ®é›†åˆæˆ–è€…**å•è°ƒ**é—®é¢˜ï¼Œç”¨äºå¿«é€ŸæŸ¥æ‰¾ targetã€minã€max
2. **ä¸é€‚åˆ**åŠ¨æ€æ•°æ®ç»“æ„ï¼ˆé“¾è¡¨ã€æ ‘ï¼‰ã€å°è§„æ¨¡æ•°æ®

[åŠ›æ‰£ 704-äºŒåˆ†æ³• ğŸ”—](https://leetcode.cn/problems/binary-search/)

<!-- truncate -->

## ä½¿ç”¨èŒƒå›´

1. åœ¨å·²æ’åºçš„æ•°ç»„æˆ–é“¾è¡¨ä¸­æŸ¥æ‰¾ **ç›®æ ‡å€¼çš„ä½ç½®** æˆ– **éªŒè¯è¯¥å€¼æ˜¯å¦å­˜åœ¨**
2. åŒºé—´å†…å¯»æ‰¾æœ€å¤§/å°å€¼ï¼ˆmax/minï¼‰

## é™åˆ¶

1. å¿…é¡»æœ‰åºï¼Œè‹¥æ•°æ®æ— åºï¼Œéœ€è¦å…ˆæ’åºä¼šå¢åŠ æ—¶é—´å¤æ‚åº¦
2. ä¸æ˜¯åŠ¨æ€æ•°æ®ç»“æ„ï¼ˆé“¾è¡¨ã€æ ‘ç­‰ï¼‰ï¼Œ**äºŒåˆ†æ³•è¦æ±‚ç›´æ¥è®¿é—®ä¸­é—´å…ƒç´ **
3. ä¸é€‚åˆè§„æ¨¡å°çš„é›†åˆï¼Œ**å°‘é‡æ•°æ®çº¿æ€§æŸ¥æ‰¾æ›´åŠ ç®€å•ç›´æ¥**

## æ‰‹å†™ä»£ç æ³¨æ„

### 1. ç¡®ä¿ä¸­é—´å…ƒç´ ä¸‹æ ‡ä¸ºæ•´å‹ï¼ˆintegerï¼‰

### 2. æ˜ç¡®åŒºé—´çš„å®šä¹‰ï¼Œä¿è¯ä»£ç æ•´ä½“ä¿æŒè¿™ä¸ªåŒºé—´åŸåˆ™

### 3. å¤–éƒ¨ while å¾ªç¯æ¡ä»¶æ³¨æ„ä¸èƒ½è¿ååŒºé—´å®šä¹‰

å¦‚æœå‡è®¾åŒºé—´ä¸º`[left, right]`ï¼Œ å·¦å³å‡é—­åˆçš„åŒºé—´å­˜åœ¨ç›¸ç­‰çš„æƒ…å†µï¼Œå› æ­¤ while æ¡ä»¶å¯ä»¥æœ‰ç›¸ç­‰çš„æƒ…å†µ

å¦‚æœå‡è®¾åŒºé—´ä¸º `[left, right)`ã€`ï¼ˆleft, right]`ï¼Œ åˆ™å·¦å³ç›¸ç­‰çš„æƒ…å†µæ˜¯ç›¸æ‚–äºè¿™ä¸ªå‡è®¾çš„åŒºé—´å®šä¹‰çš„ï¼Œä¸å­˜åœ¨ç›¸ç­‰çš„æƒ…å†µ

### 4. å†…éƒ¨å¾ªç¯åˆ¤æ–­ nums[mid] ä¸ target çš„å¤§å°å…³ç³»æ—¶ï¼Œæ˜ç¡® nums[mid] å¯å¦åŠ å…¥ä¸‹ä¸€æ¬¡å¾ªç¯

å¦‚æœå°†å·²ç»æ’é™¤çš„ nums[mid] é‡æ–°ç½®å…¥å¾ªç¯ä¸­ï¼Œæœ‰å¯¼è‡´æ•´ä¸ªç®—æ³•æ­»å¾ªç¯çš„é£é™©ï¼Œå› æ­¤æ›´æ–° leftã€right èŒƒå›´çš„æ—¶å€™ï¼Œéœ€è¦æ˜ç¡®
nums[mid] æœ¬èº«æ˜¯å¦å¯ä»¥ç»§ç»­åŠ å…¥ä¸‹ä¸€ä¸ªå¾ªç¯

## ä¼˜åŒ–ç‚¹ï¼šç¡®ä¿ä¸­é—´å…ƒç´ çš„ä¸‹æ ‡ mid ä¸ºæ•´å‹ï¼ˆintï¼‰

- ä½¿ç”¨ Math.floor() å‘ä¸‹å–æ•´ ---- æœ€å¸¸è§ã€å¯è¯»æ€§é«˜

- ä½¿ç”¨ä½æ“ä½œçš„å³ç§»è¿ç®—ç¬¦ `>>1` ---- æ€§èƒ½æœ€ä¼˜

  - (left + right) >> 1 ç›¸å½“äº (left + right) / 2 å¹¶å–æ•´ï¼ŒåŒæ—¶æ€§èƒ½æ›´ä¼˜

- left + Math.floor((right - left) / 2) ---- é¿å… leftã€right éå¸¸å¤§çš„æ—¶å€™æ•´æ•°æº¢å‡º

- parseInt((left + right) / 2) ---- ç›¸æ¯” Math.floorã€ä½æ“ä½œç¬¦æ€§èƒ½ç¨å·®

- Math.trunc((left + right) / 2) ---- æ— è®ºæ­£æ•°è´Ÿæ•°ï¼Œç›´æ¥å»é™¤å°æ•°éƒ¨åˆ†ï¼Œç›¸æ¯”ä½æ“ä½œæ€§èƒ½ç¨å·®

> å¦‚æœéœ€è¦æœ€ç®€å•ã€ç›´è§‚çš„æ•´æ•°æˆªæ–­ï¼ˆç‰¹åˆ«æ˜¯è´Ÿæ•°æ—¶ï¼‰ï¼ŒMath.trunc() æ˜¯ç†æƒ³é€‰æ‹©ã€‚
>
> å¦‚æœä¸»è¦å¤„ç†æ­£æ•°ä¸”æ€§èƒ½è¦æ±‚ä¸é«˜ï¼ŒMath.floor() ä¹Ÿæ˜¯å¸¸ç”¨çš„é€‰æ‹©ã€‚
>
> å¦‚æœéœ€è¦æé«˜çš„æ€§èƒ½æˆ–å¯¹ä½è¿ç®—æœ‰ç‰¹æ®Šéœ€æ±‚ï¼Œä½ç§»æ“ä½œç¬¦ >> æ›´é«˜æ•ˆã€‚

## ä¸ºä»€ä¹ˆé‡‡å– Math.floor() å‘ä¸‹å–æ•´ï¼Œè€Œéå‘ä¸Šå–æ•´ Math.ceil()

1. é¿å…æ­»å¾ªç¯

ä¸€äº›æƒ…å†µä¸‹å‘ä¸Šå–æ•´å¯¼è‡´ **æ°¸è¿œæ— æ³•ç¼©å°** å·¦å³åŒºé—´

ï¼ˆå°¤å…¶æ˜¯æ•°ç»„é•¿åº¦ä¸º **å¥‡æ•°** æ—¶ï¼Œå‘ä¸Šå–æ•´ä¼šå¯¼è‡´é¢å¤–çš„å¤æ‚æ€§ï¼‰

2. å¹³è¡¡æ€§ï¼ˆç¨³å®šæ€§ä¸å¯é¢„æµ‹æ€§ï¼‰

Math.floor() ä¿è¯å·¦å³åŒºé—´åˆ’åˆ†å‡è¡¡

Math.floor()ï¼šæ¯æ¬¡è¿­ä»£ä¸­å·¦åŒºé—´å¯èƒ½æ¯”å³åŒºé—´ç¨å¤§ï¼Œä½†å˜åŒ–æ˜¯ä¸€è‡´çš„ï¼Œåˆ’åˆ†çš„è¿‡ç¨‹æ˜¯å¯é¢„æµ‹å’Œç¨³å®šçš„ã€‚

Math.ceil()ï¼šå·¦å³åŒºé—´çš„åˆ’åˆ†æœ‰æ—¶å·¦å¤§ï¼Œæœ‰æ—¶å³å¤§ï¼Œå˜åŒ–æ˜¯ä¸ç¨³å®šçš„ï¼Œå°¤å…¶åœ¨å¥‡æ•°é•¿åº¦çš„åŒºé—´é‡Œï¼Œå³ä¾§ä¼šæ¯”å·¦ä¾§æ›´å°ã€‚

3. å®è·µéªŒè¯

é•¿æœŸæ—¶é—´éªŒè¯ï¼ŒMath.floor() ç›¸å¯¹äº Math.ceil() åœ¨å¤„ç†è¾¹ç•Œå€¼å’Œæ›´æ–°å·¦å³æŒ‡é’ˆæ—¶çš„å¤æ‚åº¦æ˜æ˜¾ä¸‹é™

## `>>` ä¸ `>>>` æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

1. `>>` æœ‰ç¬¦å·å³ç§»ï¼Œä¼šæ ¹æ®ç¬¦å·ä½å¡«å……é«˜ä½ï¼Œä¿ç•™è´Ÿæ•°çš„ç¬¦å·ã€é«˜ä½æ­£æ•°è¡¥ 0ã€è´Ÿæ•°è¡¥ 1ã€‘
2. `>>>` æ— ç¬¦å·å³ç§»ï¼Œä¸ç®¡ç¬¦å·ï¼Œæ€»æ˜¯ç”¨ 0 å¡«å……é«˜ä½ï¼Œå› æ­¤è´Ÿæ•°ä¼šå˜æˆè¾ƒå¤§çš„æ­£æ•°

## ä»£ç 

### `[l, r]` å·¦å³é—­åˆå†™æ³•

```javascript
/**
 * @param {number[]} nums
 * @param {number} target
 * @return {number}
 */
var search = function (nums, target) {
  const n = nums.length
  let l = 0
  let mid = 0
  let r = n - 1 // é—­åˆåŒºé—´ä¸­ r æ˜¯åŒ…å«ï¼Œæ­¤æ—¶ nums.length ä¸‹æ ‡è¶…å‡ºäº†æ•°ç»„çš„é•¿åº¦ï¼Œéœ€è¦-1

  // å‡è®¾åŒºé—´ä¸º [l, r],å·¦å³åŒºé—´éƒ½æ˜¯é—­åˆçš„ï¼Œå› æ­¤æœ‰å¯èƒ½å‡ºç° l==r è¿™ç§æƒ…å†µ
  while (l <= r) {
    mid = (l + r) >>> 1 // è¿™é‡Œç›¸å½“äº ( l + r ) / 2 ä¹‹åå–æ•´ï¼Œç¡®ä¿æœ€ç»ˆ mid è¿˜æ˜¯æ•´å‹

    if (nums[mid] === target) return mid

    if (nums[mid] > target) {
      // ä¸èƒ½è®¾ç½® r = midï¼Œå·²ç»æ˜ç¡® nums[mid] > target å³ æ­¤æ—¶çš„ mid ç»å¯¹ä¸åŒ…å« target
      // è‹¥é‡æ–°å°†è¿™ä¸ªä¸ç¬¦åˆçš„èŒƒå›´çº³å…¥å¾ªç¯ï¼Œæœ‰å¯èƒ½å¼•èµ·æ­»å¾ªç¯
      r = mid - 1
    } else {
      l = mid + 1
    }
  }
  return -1
}
```

### `[l, r)` å·¦é—­å³å¼€å†™æ³•

```javascript
/**
 * @param {number[]} nums
 * @param {number} target
 * @return {number}
 */
var search = function (nums, target) {
  // å‡è®¾åŒºé—´ä¸º [l, r)
  let mid = 0
  let l = 0
  let r = nums.length // æ­¤æ—¶å³åŒºé—´æ˜¯ä¸åŒ…å«çš„ï¼Œæ‰€ä»¥ä¸éœ€è¦å‡ 1

  // å‡åºæ•°ç»„ï¼Œ[l, r) åŒºé—´ï¼Œl == r è¿™ç§æƒ…å†µä¸åŒºé—´å®šä¹‰ç›¸æ‚–ï¼Œå› æ­¤å¾ªç¯æ¡ä»¶ä¸º l < r
  while (l < r) {
    mid = (l + r) >>> 1
    if (nums[mid] === target) return mid
    // ä¸­ä½æ•°ä¸ target çš„å…³ç³»ç”»å›¾ä¼šæ›´åŠ æ¸…æ™°
    if (nums[mid] > target) {
      r = mid // å³åŒºé—´æ˜¯å¼€åˆçš„ï¼Œå› æ­¤ mid æœ¬èº«æ˜¯ä¸åŒ…å«çš„ï¼Œä¸éœ€è¦å‡ä¸€æ’é™¤
    } else {
      l = mid + 1
    }
  }
  return -1
}
```

### å–ä¸­ä½æ•°çš„å†™æ³•

```javascript
let mid = (l + r) >>> 1

/**
 * æ³•ä¸€ï¼šæ— ç¬¦å·å³ç§»æ“ä½œç¬¦ï¼Œç›¸å½“äº l + r é™¤ä»¥ 2 ä¹‹åå–æ•´
 *
 * ä¼˜ï¼šé¿å…æº¢å‡ºï¼›æ•ˆç‡ä¸Šæ¯”æ•°å­¦è¿ç®—æ›´å¿«ï¼ˆç°ä»£JSå¼•æ“å·®å¼‚å¾®ä¹å…¶å¾®ï¼‰
 *
 * åŠ£ï¼šå¯è¯»æ€§å·®ï¼Œå¯¹äºä¸ç†Ÿæ‚‰ä½è¿ç®—çš„å¼€å‘è€…è€Œè¨€ï¼Œä¸å¦‚æ•°å­¦è¿ç®—ç›´è§‚
 */
```

```javascript
let mid = Math.floor((l + r) / 2)

/**
 * æ³•äºŒï¼šè®¡ç®—å¹³å‡å€¼ä¹‹åå‘ä¸‹å–æ•´
 *
 * ä¼˜ï¼šå¯è¯»æ€§é«˜ï¼Œç›´è§‚æ˜“ç†è§£
 *
 * åŠ£ï¼šlã€rè¿‡å¤§æ—¶æœ‰æ•´æ•°æº¢å‡ºé£é™©ï¼›æ€§èƒ½ç›¸å¯¹äºä½æ“ä½œç¬¦ç•¥é€Šä¸€ç­¹ï¼ˆå¤§å¤šæ•°æƒ…å†µä¸‹å½±å“å¾®ä¹å…¶å¾®ï¼‰
 */
```

```javascript
let mid = l + Math.floor((r - l) / 2)

/**
 * æ³•ä¸‰ï¼šè®¡ç®— r-l ä¸­ä½æ•°ï¼Œå†åŠ ä¸Šå·¦åŒºé—´
 *
 * ä¼˜ï¼šé¿å…æ•´æ•°æº¢å‡ºï¼›æ¸…æ™°ï¼šè®¡ç®—åŒºé—´ä¸­ä½æ•°ï¼Œå†åŠ ä¸Šå·¦åŒºé—´
 *
 * åŠ£ï¼šå¯¹æ¯”ç›´æ¥ç›¸åŠ å–ä¸­ä½æ•°ï¼Œç¨æ˜¾å¤æ‚
 */
```

### æ€»ç»“

é€‰æ‹©ä½¿ç”¨å“ªç§å†™æ³•ä¸»è¦å–å†³äºä»¥ä¸‹å‡ ä¸ªå› ç´ ï¼š

- å¯è¯»æ€§ï¼šåœ¨å›¢é˜Ÿä¸­ï¼Œé€‰æ‹©æ›´æ˜“è¯»çš„å†™æ³•å¯èƒ½æ›´å—æ¬¢è¿ï¼Œå°¤å…¶æ˜¯æ–°æ‰‹å¼€å‘è€…ã€‚
- æ€§èƒ½ï¼šåœ¨æ€§èƒ½è¦æ±‚é«˜çš„åœºæ™¯ä¸‹ï¼Œå¯èƒ½ä¼šå€¾å‘äºä½¿ç”¨ä½è¿ç®—ã€‚
- é¿å…æº¢å‡ºï¼šå¦‚æœæ‹…å¿ƒ l + r ä¼šå¯¼è‡´æº¢å‡ºï¼Œä½¿ç”¨ l + Math.floor((r - l) / 2) æ˜¯æ›´å®‰å…¨çš„é€‰æ‹©ã€‚

## ç›¸å…³é¢˜ç›®

- [åŠ›æ‰£ 34-åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½® ğŸ”—](https://leetcode.cn/problems/find-first-and-last-position-of-element-in-sorted-array/description/)
- [åŠ›æ‰£ 35-æœç´¢æ’å…¥ä½ç½® ğŸ”—](https://leetcode.cn/problems/search-insert-position/description/)
- [åŠ›æ‰£ 69-x çš„å¹³æ–¹æ ¹ ğŸ”—](https://leetcode.cn/problems/sqrtx/description/)
- [åŠ›æ‰£ 367-æœ‰æ•ˆçš„å®Œå…¨å¹³æ–¹æ•° ğŸ”—](https://leetcode.cn/problems/valid-perfect-square/description/)
