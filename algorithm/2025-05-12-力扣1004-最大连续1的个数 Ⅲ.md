---
slug: longest-ones-1004
title: åŠ›æ‰£1004-æœ€å¤§è¿ç»­1çš„ä¸ªæ•° â…¢
authors: yana
tags: [algorithm, leetcode, longestOnes]
---

## åŸé¢˜

```text
ç»™å®šä¸€ä¸ªäºŒè¿›åˆ¶æ•°ç»„ nums å’Œä¸€ä¸ªæ•´æ•° kï¼Œå‡è®¾æœ€å¤šå¯ä»¥ç¿»è½¬ k ä¸ª 0 ï¼Œåˆ™è¿”å›æ‰§è¡Œæ“ä½œå æ•°ç»„ä¸­è¿ç»­ 1 çš„æœ€å¤§ä¸ªæ•° ã€‚



ç¤ºä¾‹ 1ï¼š

è¾“å…¥ï¼šnums = [1,1,1,0,0,0,1,1,1,1,0], K = 2
è¾“å‡ºï¼š6
è§£é‡Šï¼š[1,1,1,0,0,1,1,1,1,1,1]
ç²—ä½“æ•°å­—ä» 0 ç¿»è½¬åˆ° 1ï¼Œæœ€é•¿çš„å­æ•°ç»„é•¿åº¦ä¸º 6ã€‚
ç¤ºä¾‹ 2ï¼š

è¾“å…¥ï¼šnums = [0,0,1,1,0,0,1,1,1,0,1,1,0,0,0,1,1,1,1], K = 3
è¾“å‡ºï¼š10
è§£é‡Šï¼š[0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1]
ç²—ä½“æ•°å­—ä» 0 ç¿»è½¬åˆ° 1ï¼Œæœ€é•¿çš„å­æ•°ç»„é•¿åº¦ä¸º 10ã€‚


æç¤ºï¼š

1 <= nums.length <= 105
nums[i] ä¸æ˜¯ 0 å°±æ˜¯ 1
0 <= k <= nums.length
```

## åˆ†æ

1. é—®é¢˜è½¬æ¢

```text
å¯ä»¥ç¿»è½¬ k ä¸ª 0 åæ•°ç»„ä¸­æœ€é•¿çš„è¿ç»­ 1 çš„é•¿åº¦
ğŸ‘‡
åªèƒ½åŒ…å« k ä¸ª 0 çš„è¿ç»­ 1 çš„æ•°ç»„
ğŸ‘‡
æ»‘åŠ¨çª—å£è®°å½•åŒ…å« k ä¸ª 0 çš„ç»“æœé›†ï¼Œè¿”å›æœ€é•¿çš„ç»“æœé›†çš„é•¿åº¦

```

## è§£é¢˜æ€è·¯

1. è¿ç»­ + æœ€é•¿ ==> è€ƒè™‘æ»‘åŠ¨çª—å£
2. ç¿»è½¬ k ä¸ª 0 ä¸º 1 å¾—åˆ°è¿ç»­ 1 çš„æœ€é•¿é•¿åº¦ ==> "åŒ…å« k ä¸ª 0 çš„æœ€é•¿ 1 ç»„æˆçš„æœ€é•¿é•¿åº¦"
   - ä¸€æ¬¡éå†ï¼Œé‡åˆ° 1 å³ç«¯æ‰©å¼  r++
   - é‡åˆ° 0 è®°å½• 0 çš„ä¸ªæ•°
   - ä¸€æ—¦ 0 çš„ä¸ªæ•°è¶…è¿‡ kï¼ˆcount > kï¼‰ï¼Œæ”¶ç¼©å·¦è¾¹ï¼ˆæ”¶ç¼©ä¹‹å‰å·¦ç«¯å…ƒç´ ä¸º 0ï¼Œæ›´æ–°çª—å£ä¸­ 0 çš„ä¸ªæ•° - 1 ï¼‰
   - æ¯æ¬¡ç§»åŠ¨å³æŒ‡é’ˆä¹‹åéƒ½è®°å½•å½“å‰çª—å£çš„é•¿åº¦ï¼ˆç»“æœçš„å­é›†ï¼‰

## ä¼ªä»£ç 

## ä»£ç 

### for å¾ªç¯

```js
/**
 * @param {number[]} nums
 * @param {number} k
 * @return {number}
 */
var longestOnes = function (nums, k) {
  // ç¿»è½¬ k ä¸ª 0 å¾—åˆ°æœ€é•¿è¿ç»­ 1 çš„é•¿åº¦
  // æŠŠæœ€é•¿è¿ç»­1çœ‹ä½œçª—å£ï¼Œå†…éƒ¨åªèƒ½åŒ…å« <= k ä¸ªï¼Œå¦åˆ™çª—å£ä¸åˆæ³•ï¼ˆ>k)ï¼Œå°±éœ€è¦æ”¶ç¼©å·¦åŒºé—´
  // ç›´åˆ°å†…éƒ¨0çš„ä¸ªæ•° < kä¹‹å‰ï¼Œéƒ½ä¸€ç›´æ”¶ç¼©å·¦åŒºé—´
  // æ¯æ¬¡ç§»åŠ¨å³æŒ‡é’ˆéƒ½è®°å½•å½“å‰è¿ç»­ 1 çš„é•¿åº¦

  let l = 0
  let count = 0
  let len = 0
  for (let r = 0; r < nums.length; r++) {
    if (nums[r] == 0) {
      // å³æŒ‡é’ˆéå†çš„æ—¶å€™é‡åˆ° 0 å°±æ›´æ–°å½“å‰çª—å£ä¸­ 0 çš„ä¸ªæ•°
      count++
    }
    while (count > k) {
      // çª—å£ä¸­ 0 çš„ä¸ªæ•°è¶…è¿‡é¢˜ç›®é™åˆ¶çš„ k ï¼Œæ”¶ç¼©å·¦åŒºé—´ç¡®ä¿çª—å£æ˜¯åˆæ³•çš„
      if (nums[l] == 0) count--
      // å³ç§»å·¦æŒ‡é’ˆ
      l++
    }
    // æ¯æ¬¡ç§»åŠ¨å³æŒ‡é’ˆçš„æ—¶å€™ï¼Œè®°å½•å½“å‰çª—å£çš„é•¿åº¦
    len = Math.max(r - l + 1, len)
  }
  return len
}
```

### while å¾ªç¯

```js
/**
 * @param {number[]} nums
 * @param {number} k
 * @return {number}
 */
var longestOnes = function (nums, k) {
  // ç¿»è½¬ k ä¸ª 0 å¾—åˆ°æœ€é•¿è¿ç»­ 1 çš„é•¿åº¦
  // æŠŠæœ€é•¿è¿ç»­1çœ‹ä½œçª—å£ï¼Œå†…éƒ¨åªèƒ½åŒ…å« <= k ä¸ªï¼Œå¦åˆ™çª—å£ä¸åˆæ³•ï¼ˆ>k)ï¼Œå°±éœ€è¦æ”¶ç¼©å·¦åŒºé—´
  // ç›´åˆ°å†…éƒ¨0çš„ä¸ªæ•° < kä¹‹å‰ï¼Œéƒ½ä¸€ç›´æ”¶ç¼©å·¦åŒºé—´
  // æ¯æ¬¡ç§»åŠ¨å³æŒ‡é’ˆéƒ½è®°å½•å½“å‰è¿ç»­ 1 çš„é•¿åº¦

  let l = 0
  let r = 0
  let count = 0
  let len = 0
  while (r < nums.length) {
    // é‡åˆ° 0 æ›´æ–° count
    if (nums[r] == 0) count++
    // ä¸€æ—¦ count > k æ”¶ç¼©å·¦æŒ‡é’ˆ
    while (count > k) {
      // æ”¶ç¼©ä¹‹å‰åˆ¤æ–­ï¼Œå³å°†è¢«æ’é™¤çš„å…ƒç´ æ˜¯å¦ä¸º0ï¼Œæ˜¯åˆ™æ›´æ–° count
      if (nums[l] == 0) count--
      l++
    }
    // ç§»åŠ¨å³æŒ‡é’ˆä¹‹å‰è®°å½•å½“å‰åŒºé—´çš„é•¿åº¦
    len = Math.max(len, r - l + 1)
    // æ‰©å¼ å³åŒºé—´
    r++
  }
  console.log({ len })
  return len
}
```
